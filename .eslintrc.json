{
  "env": {
    "browser": true,
    "es2021": true,
    "node": true
  },
  "extends": "eslint:recommended",
  "parserOptions": {
    "ecmaVersion": 2021,
    "sourceType": "script"
  },
  "globals": {
    "SpreadsheetApp": "readonly",
    "ScriptApp": "readonly",
    "ContentService": "readonly",
    "HtmlService": "readonly",
    "CacheService": "readonly",
    "Utilities": "readonly",
    "FormApp": "readonly",
    "google": "readonly",
    "Logger": "readonly",
    "Session": "readonly",
    "UrlFetchApp": "readonly",
    "LockService": "readonly",
    "PropertiesService": "readonly",
    "ERR": "readonly",
    "Ok": "readonly",
    "Err": "readonly",
    "UserFriendlyErr_": "readonly",
    "diag_": "readonly",
    "getDb_": "readonly",
    "getStoreSheet_": "readonly",
    "_ensureAnalyticsSheet_": "readonly",
    "findBrand_": "readonly",
    "findBrandByHost_": "readonly",
    "findTemplate_": "readonly",
    "findFormTemplate_": "readonly",
    "listFormTemplates_": "readonly",
    "getAdminSecret_": "readonly",
    "setupAdminSecrets_": "readonly",
    "resolveUrlAlias_": "readonly",
    "listUrlAliases_": "readonly",
    "loadBrands_": "readonly",
    "isValidAdminKey_": "readonly",
    "safeJSONParse_": "readonly",
    "isUrl": "readonly",
    "schemaCheck": "readonly",
    "brand": "readonly",
    "TEMPLATES": "readonly",
    "BRANDS": "readonly",
    "FORM_TEMPLATES": "readonly",
    "ZEB": "readonly",
    "SecurityMiddleware_sanitizeInput": "readonly",
    "SecurityMiddleware_sanitizeId": "readonly",
    "SecurityMiddleware_sanitizeSpreadsheetValue": "readonly",
    "SecurityMiddleware_sanitizeMetaForLogging": "readonly",
    "SecurityMiddleware_assertScopeAllowed": "readonly",
    "SecurityMiddleware_authenticateRequest": "readonly",
    "SecurityMiddleware_validateOrigin": "readonly",
    "SecurityMiddleware_generateCSRFToken": "readonly",
    "SecurityMiddleware_validateCSRFToken": "readonly",
    "SecurityMiddleware_generateJWT": "readonly",
    "SecurityMiddleware_gate": "readonly",
    "SecurityMiddleware_timingSafeCompare": "readonly",
    "FormService_listTemplates": "readonly",
    "FormService_createFromTemplate": "readonly",
    "FormService_generateShortlink": "readonly",
    "FormService_getResponseAnalytics": "readonly",
    "FormService_linkToEvent": "readonly",
    "SponsorService_calculateROI": "readonly",
    "SponsorService_validatePlacements": "readonly",
    "SponsorService_getSettings": "readonly",
    "SponsorService_getPortfolioSponsors": "readonly",
    "WebhookService_register": "readonly",
    "WebhookService_unregister": "readonly",
    "WebhookService_list": "readonly",
    "WebhookService_deliver": "readonly",
    "WebhookService_test": "readonly",
    "WebhookService_getDeliveries": "readonly",
    "WebhookService_verifySignature": "readonly",
    "AnalyticsService_logEvents": "readonly",
    "AnalyticsService_getEventReport": "readonly",
    "AnalyticsService_getSharedAnalytics": "readonly",
    "ApiSchemas_validateRequest": "readonly",
    "ApiSchemas_validateResponse": "readonly",
    "ApiSchemas_getSchema": "readonly",
    "ApiSchemas_getAllSchemas": "readonly",
    "TemplateService_migrateData": "readonly",
    "TemplateService_renderForm": "readonly",
    "TemplateService_composeTemplate": "readonly",
    "api_translate": "readonly",
    "api_getTemplate": "readonly",
    "api_listTemplates": "readonly",
    "api_validateTemplateData": "readonly",
    "api_healthCheck": "readonly",
    "api_runDiagnostics": "readonly",
    "api_createShortlink": "readonly",
    "api_exportSharedReport": "readonly",
    "i18n_detectLocale": "readonly",
    "i18n_formatDate": "readonly",
    "i18n_formatCurrency": "readonly",
    "i18n_setUserLocale": "readonly",
    "i18n_getSupportedLocales": "readonly",
    "doGet": "readonly",
    "doPost": "readonly",
    "include": "readonly"
  },
  "rules": {
    "no-unused-vars": ["warn", { "argsIgnorePattern": "^_" }],
    "no-console": "off",
    "no-undef": "warn",
    "semi": ["warn", "always"],
    "quotes": "off",
    "no-var": "warn"
  },
  "overrides": [
    {
      "files": ["*.gs"],
      "parserOptions": {
        "sourceType": "script"
      }
    },
    {
      "files": ["Code.gs"],
      "globals": {
        "ZEB": "readonly",
        "BRANDS": "readonly",
        "TEMPLATES": "readonly",
        "FORM_TEMPLATES": "readonly",
        "loadBrands_": "readonly",
        "findBrand_": "readonly",
        "findBrandByHost_": "readonly",
        "findTemplate_": "readonly",
        "findFormTemplate_": "readonly",
        "listFormTemplates_": "readonly",
        "getAdminSecret_": "readonly"
      }
    },
    {
      "files": ["tests/**/*.js"],
      "env": {
        "jest": true
      },
      "globals": {
        "test": "readonly",
        "expect": "readonly",
        "describe": "readonly",
        "it": "readonly",
        "beforeEach": "readonly",
        "afterEach": "readonly",
        "beforeAll": "readonly",
        "afterAll": "readonly"
      }
    },
    {
      "files": ["tests/e2e/**/*.js"],
      "parserOptions": {
        "sourceType": "module"
      },
      "rules": {
        "no-unused-vars": "off"
      }
    },
    {
      "files": ["*.html"],
      "rules": {
        "no-undef": "off"
      }
    },
    {
      "files": ["cloudflare-proxy/**/*.js"],
      "parserOptions": {
        "sourceType": "module"
      },
      "env": {
        "browser": false,
        "node": false,
        "worker": true
      }
    }
  ],
  "ignorePatterns": [
    "node_modules/",
    "coverage/",
    "dist/",
    "build/",
    "playwright-report/",
    "tests/load/**/*.js"
  ]
}
