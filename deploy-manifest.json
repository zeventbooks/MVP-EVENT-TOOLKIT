{
  "$schema": "./schemas/deploy-manifest.schema.json",
  "_comment": "Centralized Deployment Manifest - Single Source of Truth for Environment Configuration",
  "_version": "1.0.0",
  "_lastUpdated": "2025-12-10",
  "_story": "Story 1.2 (DevOps): Centralized deployment manifest for environment-specific settings",

  "environments": {
    "staging": {
      "name": "Staging",
      "description": "Safe sandbox for testing and pre-production validation",

      "appsScript": {
        "scriptId": "1gHiPuj7eXNk09dDyk17SJ6QsCJg7LMqXBRrkowljL3z2TaAKFIvBLhHJ",
        "deploymentId": "AKfycbwFneYCpkio7wCn7y08eDUb2PRCPc2Tdtbv20L4AbEHvuCvoqY9ks7-ONL0pzPPw4Hm",
        "webAppUrl": "https://script.google.com/macros/s/AKfycbwFneYCpkio7wCn7y08eDUb2PRCPc2Tdtbv20L4AbEHvuCvoqY9ks7-ONL0pzPPw4Hm/exec",
        "editUrl": "https://script.google.com/u/1/home/projects/1gHiPuj7eXNk09dDyk17SJ6QsCJg7LMqXBRrkowljL3z2TaAKFIvBLhHJ/edit",
        "_note": "deploymentId is updated automatically by CI/CD after each deployment"
      },

      "cloudflare": {
        "workerName": "eventangle-staging",
        "routes": [
          "stg.eventangle.com/*",
          "api-stg.eventangle.com/*"
        ],
        "zoneName": "eventangle.com"
      },

      "urls": {
        "baseUrl": "https://stg.eventangle.com",
        "apiUrl": "https://api-stg.eventangle.com"
      },

      "flags": {
        "workerEnv": "staging",
        "debugLevel": "debug",
        "enableDebugEndpoints": true
      }
    },

    "production": {
      "name": "Production",
      "description": "Customer-facing production environment",

      "appsScript": {
        "scriptId": "1YO4apLOQoAIh208AcAqWO3pWtx_O3yas_QC4z-pkurgMem9UgYOsp86l",
        "deploymentId": "AKfycbz-RVTCdsQsI913wN3TkPtUP8F8EhSjyFAlWIpLVRgzV6WJ-isDyG-ntaV1VjBNaWZLdw",
        "webAppUrl": "https://script.google.com/macros/s/AKfycbz-RVTCdsQsI913wN3TkPtUP8F8EhSjyFAlWIpLVRgzV6WJ-isDyG-ntaV1VjBNaWZLdw/exec",
        "editUrl": "https://script.google.com/u/1/home/projects/1YO4apLOQoAIh208AcAqWO3pWtx_O3yas_QC4z-pkurgMem9UgYOsp86l/edit",
        "_note": "deploymentId is updated automatically by CI/CD after each deployment"
      },

      "cloudflare": {
        "workerName": "eventangle-prod",
        "routes": [
          "eventangle.com/*",
          "www.eventangle.com/*",
          "api.eventangle.com/*"
        ],
        "zoneName": "eventangle.com"
      },

      "urls": {
        "baseUrl": "https://www.eventangle.com",
        "apiUrl": "https://api.eventangle.com"
      },

      "flags": {
        "workerEnv": "production",
        "debugLevel": "error",
        "enableDebugEndpoints": false
      }
    }
  },

  "defaults": {
    "testEnvironment": "staging",
    "deploymentBranch": "main",
    "tagPattern": "v*.*.*"
  },

  "brands": {
    "_comment": "Brand-specific URLs follow pattern: {baseUrl}/{brandId}/{page}",
    "validBrands": ["root", "abc", "cbc", "cbl"],
    "defaultBrand": "root"
  },

  "validation": {
    "scriptIdPattern": "^[a-zA-Z0-9_-]{40,60}$",
    "deploymentIdPattern": "^AKfycb[a-zA-Z0-9_-]+$",
    "deploymentIdMinLength": 50
  }
}
