# Cloudflare Workers Configuration
# https://developers.cloudflare.com/workers/wrangler/configuration/

name = "zeventbooks"
main = "worker.js"
compatibility_date = "2024-01-01"

# Account ID - Set via environment or wrangler login
# account_id = "your-account-id"

# ============================================
# Environment Variables
# ============================================
# The deployment ID is updated by CI/CD after each Apps Script deployment
[vars]
DEPLOYMENT_ID = "AKfycbz-RVTCdsQsI913wN3TkPtUP8F8EhSjyFAlWIpLVRgzV6WJ-isDyG-ntaV1VjBNaWZLdw"

# ============================================
# Production - FULL SITE (zeventbooks.com)
# ============================================
# This serves EVERYTHING through Cloudflare:
# - HTML pages (admin, public, display, etc.)
# - API responses (status, events, sponsors)
# - All brands (root, abc, cbc, cbl)
[env.production]
name = "zeventbooks-prod"
routes = [
  # Main domain - serves full site
  { pattern = "zeventbooks.com/*", zone_name = "zeventbooks.com" },
  { pattern = "www.zeventbooks.com/*", zone_name = "zeventbooks.com" },
  # API subdomain (optional, same worker)
  { pattern = "api.zeventbooks.com/*", zone_name = "zeventbooks.com" }
]

[env.production.vars]
DEPLOYMENT_ID = "AKfycbz-RVTCdsQsI913wN3TkPtUP8F8EhSjyFAlWIpLVRgzV6WJ-isDyG-ntaV1VjBNaWZLdw"

# ============================================
# Staging/QA Environment
# ============================================
[env.staging]
name = "zeventbooks-staging"
routes = [
  { pattern = "staging.zeventbooks.com/*", zone_name = "zeventbooks.com" },
  { pattern = "api-staging.zeventbooks.com/*", zone_name = "zeventbooks.com" }
]

[env.staging.vars]
DEPLOYMENT_ID = "AKfycbz-RVTCdsQsI913wN3TkPtUP8F8EhSjyFAlWIpLVRgzV6WJ-isDyG-ntaV1VjBNaWZLdw"

# ============================================
# API Only (subdomain only, no main site)
# ============================================
# Use this if you want Cloudflare for API only
# and keep Hostinger for the main site
[env.api-only]
name = "zeventbooks-api"
routes = [
  { pattern = "api.zeventbooks.com/*", zone_name = "zeventbooks.com" }
]

[env.api-only.vars]
DEPLOYMENT_ID = "AKfycbz-RVTCdsQsI913wN3TkPtUP8F8EhSjyFAlWIpLVRgzV6WJ-isDyG-ntaV1VjBNaWZLdw"

# ============================================
# Development (workers.dev subdomain)
# ============================================
# Default deployment uses workers.dev:
# https://zeventbooks.YOUR_SUBDOMAIN.workers.dev
#
# Test URLs:
# - https://zeventbooks.YOUR_SUBDOMAIN.workers.dev?page=admin&brand=root
# - https://zeventbooks.YOUR_SUBDOMAIN.workers.dev?p=status&brand=root
# - https://zeventbooks.YOUR_SUBDOMAIN.workers.dev?page=display&brand=root
